<tr>
    <td>
        <%= f.text_field :name, :maxlength => 20, :size => 40 %>
    </td>
    <td>

        <div class="colony-qc-data">

            <fieldset class="collapsible hide-by-default">
                <legend>Expand to view and edit</legend>
                <div>
                    <table>
                        <% if f.object.colony_qc.blank? %>
                            <% f.object.build_colony_qc %>
                        <% end %>
                        <%= f.fields_for :colony_qc do |builder| %>
                            <% MiAttempt::QC_FIELDS.each do |qc_field| %>
                                <tr>
                                    <td><%= builder.label(:post, qc_field) %></td>
                                    <td><%= builder.select qc_field, ['na', 'pass', 'fail'] %></td>
                                </tr>
                            <% end %>
                        <% end %>
                    </table>
                </div>
            </fieldset>
        </div>
    </td>
    <td>
    <% if ! f.object.new_record? && (f.object.trace_data_available || f.object.trace_data_pending) %>
        <button id="cbutton_<%= f.object.id %>" type="button" onclick="$(this).toggle();var id = '#cdiv_<%= f.object.id %>'; $(id).toggle();">Replace</button>
            <div id="cdiv_<%= f.object.id %>" style="display:none;">
                <%= f.file_field :trace_file %>
            </div>
    <% else %>
            <%= f.file_field :trace_file %>
    <% end %>
    </td>

    <td style="text-align:center">

        <% if f.object.trace_data_error %>
            <% if f.object.file_error.to_s.length > 0 %>
                <p>Error: <%= f.object.file_error %></p>
            <% else %>
                <p>error</p>
            <% end %>
        <% elsif f.object.trace_data_pending %>
            <p>pending</p>
        <% elsif ! f.object.new_record? && f.object.trace_data_available %>
            <%= link_to 'view results', :controller => :colony, :action => :show, :id => f.object.id %>
        <% end %>

    </td>
    <td>
        <a>Allele</a>
    </td>
    <td style="text-align: center;vertical-align: middle;">
        <%= f.check_box :genotype_confirmed %>
    </td>
    <td style="text-align: center;vertical-align: middle;">
        <%= f.check_box :is_het %>
    </td>
    <td>
        <% if f.object.new_record? %>
            <%= f.hidden_field :_destroy, :class => 'destroy-field' %>
            <%= link_to "remove", '#', class: "remove-row" %>
        <% else %>
            <%= f.hidden_field :_destroy, :class => 'destroy-field' %>
            <%= link_to "remove", '#', class: "hide-row" %>
        <% end %>
    </td>
</tr>
