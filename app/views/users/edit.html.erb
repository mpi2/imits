<% @title = 'Edit Profile' %>

<div class="user-form grid_4 prefix_4 suffix_4">
  <%= form_for :user, :url => user_path, :html => { :method => :put } do |form| %>

    <fieldset>
      <legend><%= 'Edit Details' %></legend>

      <table>
        <tr>
          <td>
            <%= form.label :name %>
            <%= form.text_field :name %>
          </td>
        </tr>

        <tr>
          <td>
            <%= form.label :is_contactable, 'Contactable' %>
            <%= form.check_box :is_contactable %>
          </td>
        </tr>

        <% if session[:masquerade] || current_user.admin? %>
          <tr>
            <td>
              <%= form.label :admin %>
              <span><%= form.check_box :admin %></span>
            </td>
          </tr>
        <% end %>

        <tr>
          <td>
            <%= form.label :production_centre %>
            <span><%= resource.production_centre.name %></span>
          </td>
        </tr>

        <tr>
          <td>
            <%= form.label :filter_by_centre %>
            <span><%= resource.filter_by_centre.blank? ? 'None Set' : resource.filter_by_centre.try(:name) %></span>
          </td>
        </tr>

      </table>
    </fieldset>

    <fieldset>
      <legend><%= 'Change Password' %></legend>

      <table>
        <tr>
          <td>
            <%= form.label :password, 'New Password' %>
            <%= form.password_field :password %>
          </td>
        </tr>

        <tr>
          <td>
            <%= form.label :password_confirmation, 'Confirm New Password' %>
            <%= form.password_field :password_confirmation %>
          </td>
        </tr>
      </table>
    </fieldset>

    <%= hidden_field_tag :redirect, params[:redirect] %>

    <div class="submit">
      <%= form.submit 'Save Changes', :id => 'user_submit' %>
    </div>

  <% end %>
</div>
