<% generator = FieldGenerator.new(form) %>
<% phenotype_attempt = form.object %>

<fieldset class="collapsible">
  <legend>Universal Details</legend>
  <div>
  <% if @mi_attempt %>
    <label>MI Attempt Colony Name</label>
    <%= @mi_attempt.colony_name %>
    <%= form.hidden_field 'mi_attempt_colony_name', :value => @mi_attempt.colony_name %>
  <% end %>
  </div>
  <div>
     <%= generator.text_field(:colony_name, :class => 'x-form-text', :size => 20) %>
   </div>
   <div class="consortium-name">
     <% consortium_field = capture do %>
      <% if phenotype_attempt.new_record? %>
        <%= form.collection_select :consortium_name, @consortia, :name, :name, :include_blank => true %>
      <% else %>
        <span><%= phenotype_attempt.consortium_name %></span>
      <% end %>
    <% end %>
    <%= generator.form_field(:consortium_name, 'Consortium', consortium_field) %>
   </div>
   <div class="production-centre-name">
      <%= form.label :production_centre_name, 'Production Centre' %>
      <% if phenotype_attempt.new_record? %>
        <%= form.collection_select :production_centre_name, @centres, :name, :name %>
      <% else %>
        <span><%= phenotype_attempt.production_centre_name %></span>
      <% end %>
   </div>
   <div>
     <%= form.label :is_active, :is_active.to_s.titlecase %>
     <%= form.check_box :is_active %>
   </div>
</fieldset>
<fieldset class="collapsible">
  <legend>Rederivation</legend>
   <% [:rederivation_started, :rederivation_complete].each do |field| %>
      <div>
        <%= form.label field, field.to_s.titlecase %>
        <%= form.check_box field %>
      </div>
   <% end %>
</fieldset>
<fieldset class="collapsible">
  <legend>Cre Matings</legend>
   <div>
     <%= generator.number_field :number_of_cre_matings_started %>
     <%= generator.number_field :number_of_cre_matings_successful %>
   </div>
   <div>
     <%= generator.mouse_allele_type_field %>
   </div>
</fieldset>
